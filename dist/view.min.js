import _ from"lodash";import{timeforce,extend}from"timeforce";var View=function(e){!View.$&&(View.$=_.result(View,"fn$")),this.cid=_.uniqueId("view"),this.preinitialize.apply(this,arguments),_.extend(this,_.pick(e,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments)};View.fn$=()=>"undefined"!=typeof window&&window.$||null,View.$=null;var delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,timeforce.Events,{_global:timeforce,tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof View.$?e:View.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=_.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(_.isFunction(i)||(i=this[i]),i){var n=t.match(delegateEventSplitter);this.delegate(n[1],n[2],i.bind(this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"));else{var e=_.extend({},_.result(this,"attributes"));this.id&&(e.id=_.result(this,"id")),this.className&&(e.class=_.result(this,"className")),this.setElement(this._createElement(_.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),View.extend=extend;export default View;